{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { select } from '@ngrx/store';\nimport { filter, of } from 'rxjs';\nimport * as fromApp from 'src/app/store/igrac.selector';\nimport * as TimActions from 'src/app/store/igrac.action';\nimport { selectIgraciZamena } from 'src/app/store/igrac.selector';\nimport { loadIgraciZamena } from 'src/app/store/igrac.action';\nexport let FudbalskitimComponent = class FudbalskitimComponent {\n  constructor(store, fudbalskitimService) {\n    this.store = store;\n    this.fudbalskitimService = fudbalskitimService;\n    this.trenutniTimID = 1; // hardcoded\n    this.trenutniTim$ = of();\n    this.igraciTeren$ = of([]);\n    this.igraciTerenIds$ = of([]);\n    this.igraciZamenaIds$ = of([]);\n    this.igraciZamena$ = of([]);\n    this.golmani$ = of([]);\n    this.odbrambeni$ = of([]);\n    this.veznjaci$ = of([]);\n    this.napadaci$ = of([]);\n    this.selectedPlayerIdOut = null;\n    this.selectedPlayerIdIn = null;\n    this.igraciZamena$ = this.store.select(selectIgraciZamena);\n  }\n  ngOnInit() {\n    // this.trenutniTim$ = this.store.select(fromApp.selectTrenutniTim);\n    // this.igraciTerenIds$ = this.store.select(fromApp.selectIgraciTerenIds);\n    // this.igraciZamenaIds$ = this.store.select(fromApp.selectIgraciZamenaIds);\n    // this.igraciZamena$ = this.store.select(fromApp.selectIgraciZamena);\n    // this.igraciTeren$ = this.store.select(fromApp.selectIgraciTeren);\n    // this.golmani$ = this.store.select(fromApp.selectGolmani);\n    // this.odbrambeni$ = this.store.select(fromApp.selectOdbrambeni);\n    // this.veznjaci$ = this.store.select(fromApp.selectVeznjaci);\n    // this.napadaci$ = this.store.select(fromApp.selectNapadaci);\n    // this.store.dispatch(TimActions.loadTimById({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadIgraciZamena({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadIgraciTeren({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadGolmani({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadOdbrambeni({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadVeznjaci({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadNapadaci({ timID: this.trenutniTimID }));\n    this.store.dispatch(loadIgraciZamena({\n      timID: this.trenutniTimID\n    }));\n    this.store.pipe(select(fromApp.selectGolmani), filter(golmani => golmani.length > 0)).subscribe(golmani => {\n      this.golmani$ = of(golmani);\n    });\n    this.store.pipe(select(fromApp.selectOdbrambeni), filter(odbrambeni => odbrambeni.length > 0)).subscribe(odbrambeni => {\n      this.odbrambeni$ = of(odbrambeni);\n    });\n    this.store.pipe(select(fromApp.selectVeznjaci), filter(vezni => vezni.length > 0)).subscribe(vezni => {\n      this.veznjaci$ = of(vezni);\n    });\n    this.store.pipe(select(fromApp.selectNapadaci), filter(napadaci => napadaci.length > 0)).subscribe(napadaci => {\n      this.napadaci$ = of(napadaci);\n    });\n    this.store.pipe(select(fromApp.selectIgraciTeren), filter(igraciTeren => igraciTeren.length > 0)).subscribe(igraciTeren => {\n      this.igraciTeren$ = of(igraciTeren);\n    });\n    this.store.pipe(select(fromApp.selectIgraciZamena), filter(igraciZamena => igraciZamena.length > 0)).subscribe(igraciZamena => {\n      this.igraciZamena$ = of(igraciZamena);\n    });\n    // console.log(this.igraciZamena$);\n    //  this.store.pipe(select(state => state)).subscribe(currentState => {\n    //   console.log('Trenutno stanje:', currentState.igraci, currentState.timovi);\n    // });\n  }\n\n  clickedUlazi(playerId) {\n    this.selectedPlayerIdIn = playerId;\n  }\n  clickedIzlazi(playerId) {\n    this.selectedPlayerIdOut = playerId;\n  }\n  swapPlayers() {\n    if (this.selectedPlayerIdOut !== null && this.selectedPlayerIdIn !== null) {\n      this.store.dispatch(TimActions.swapPlayers({\n        timID: this.trenutniTimID,\n        igracUlaziId: this.selectedPlayerIdIn,\n        igracIzlaziId: this.selectedPlayerIdOut\n      }));\n      this.selectedPlayerIdOut = null;\n      this.selectedPlayerIdIn = null;\n    }\n  }\n};\nFudbalskitimComponent = __decorate([Component({\n  selector: 'app-fudbalskitim',\n  templateUrl: './fudbalskitim.component.html',\n  styleUrls: ['./fudbalskitim.component.css']\n})], FudbalskitimComponent);","map":{"version":3,"names":["Component","select","filter","of","fromApp","TimActions","selectIgraciZamena","loadIgraciZamena","FudbalskitimComponent","constructor","store","fudbalskitimService","trenutniTimID","trenutniTim$","igraciTeren$","igraciTerenIds$","igraciZamenaIds$","igraciZamena$","golmani$","odbrambeni$","veznjaci$","napadaci$","selectedPlayerIdOut","selectedPlayerIdIn","ngOnInit","dispatch","timID","pipe","selectGolmani","golmani","length","subscribe","selectOdbrambeni","odbrambeni","selectVeznjaci","vezni","selectNapadaci","napadaci","selectIgraciTeren","igraciTeren","igraciZamena","clickedUlazi","playerId","clickedIzlazi","swapPlayers","igracUlaziId","igracIzlaziId","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\OneDrive\\OneDrive - Faculty of Electronic Engineering\\Radna povr≈°ina\\AngularProjekat\\src\\app\\components\\fudbalskitim\\fudbalskitim.component.ts"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { Store, select } from '@ngrx/store';\nimport { Observable, filter, of } from 'rxjs';\nimport { AppState } from 'src/app/app.state';\nimport { Igrac } from 'src/app/models/igrac';\nimport { Tim } from 'src/app/models/tim';\nimport * as fromApp from 'src/app/store/igrac.selector';\nimport * as TimActions from 'src/app/store/igrac.action';\nimport { FudbalskitimService } from 'src/app/services/fudbalskitim.service';\nimport { selectIgraciZamena } from 'src/app/store/igrac.selector';\nimport { loadIgraciZamena } from 'src/app/store/igrac.action';\n\n\n@Component({\n  selector: 'app-fudbalskitim',\n  templateUrl: './fudbalskitim.component.html',\n  styleUrls: ['./fudbalskitim.component.css']\n})\nexport class FudbalskitimComponent implements OnInit {\n  trenutniTimID = 1; // hardcoded\n  trenutniTim$: Observable<Tim | undefined> = of();\n  igraciTeren$: Observable<Igrac[]> = of([]);\n  igraciTerenIds$: Observable<number[]> = of([]);\n  igraciZamenaIds$: Observable<Igrac[]> = of([]);\n  igraciZamena$: Observable<Igrac[]> = of([]);\n  golmani$: Observable<Igrac[]>= of([]);\n  odbrambeni$: Observable<Igrac[]>= of([]);\n  veznjaci$: Observable<Igrac[]>= of([]);\n  napadaci$: Observable<Igrac[]> = of([]);\n\n  selectedPlayerIdOut: number | null = null;\n  selectedPlayerIdIn: number | null = null;\n\n  constructor(private store: Store<AppState>, private fudbalskitimService: FudbalskitimService) {\n    this.igraciZamena$ = this.store.select(selectIgraciZamena);\n  }\n\n  ngOnInit(): void {\n    // this.trenutniTim$ = this.store.select(fromApp.selectTrenutniTim);\n    // this.igraciTerenIds$ = this.store.select(fromApp.selectIgraciTerenIds);\n    // this.igraciZamenaIds$ = this.store.select(fromApp.selectIgraciZamenaIds);\n    // this.igraciZamena$ = this.store.select(fromApp.selectIgraciZamena);\n    // this.igraciTeren$ = this.store.select(fromApp.selectIgraciTeren);\n    // this.golmani$ = this.store.select(fromApp.selectGolmani);\n    // this.odbrambeni$ = this.store.select(fromApp.selectOdbrambeni);\n    // this.veznjaci$ = this.store.select(fromApp.selectVeznjaci);\n    // this.napadaci$ = this.store.select(fromApp.selectNapadaci);\n    \n\n    // this.store.dispatch(TimActions.loadTimById({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadIgraciZamena({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadIgraciTeren({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadGolmani({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadOdbrambeni({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadVeznjaci({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadNapadaci({ timID: this.trenutniTimID }));\n    this.store.dispatch(loadIgraciZamena({ timID: this.trenutniTimID }));\n\n    this.store.pipe(\n      select(fromApp.selectGolmani),\n      filter(golmani => golmani.length > 0),\n    ).subscribe(golmani => {\n      this.golmani$ = of(golmani);\n    });\n\n    this.store.pipe(\n      select(fromApp.selectOdbrambeni),\n      filter(odbrambeni => odbrambeni.length > 0),\n    ).subscribe(odbrambeni => {\n      this.odbrambeni$ = of(odbrambeni);\n    });\n\n    this.store.pipe(\n      select(fromApp.selectVeznjaci),\n      filter(vezni => vezni.length > 0),\n    ).subscribe(vezni => {\n      this.veznjaci$ = of(vezni);\n    });\n\n    this.store.pipe(\n      select(fromApp.selectNapadaci),\n      filter(napadaci => napadaci.length > 0),\n    ).subscribe(napadaci => {\n      this.napadaci$ = of(napadaci);\n    });\n    \n    this.store.pipe(\n      select(fromApp.selectIgraciTeren),\n      filter(igraciTeren => igraciTeren.length > 0),\n    ).subscribe(igraciTeren => {\n      this.igraciTeren$ = of(igraciTeren);\n    });\n     \n    this.store.pipe(\n      select(fromApp.selectIgraciZamena),\n      filter(igraciZamena => igraciZamena.length > 0),\n    ).subscribe(igraciZamena => {\n      this.igraciZamena$ = of(igraciZamena);\n    });\n     \n   \n    // console.log(this.igraciZamena$);\n    //  this.store.pipe(select(state => state)).subscribe(currentState => {\n    //   console.log('Trenutno stanje:', currentState.igraci, currentState.timovi);\n    // });\n\n  }\n\n  clickedUlazi(playerId: number) {\n    this.selectedPlayerIdIn = playerId;\n  }\n\n  clickedIzlazi(playerId: number) {\n    this.selectedPlayerIdOut = playerId;\n  }\n\n\n\n  swapPlayers() {\n    if (this.selectedPlayerIdOut !== null && this.selectedPlayerIdIn !== null) {\n      this.store.dispatch(\n        TimActions.swapPlayers({\n          timID: this.trenutniTimID,\n          igracUlaziId: this.selectedPlayerIdIn,\n          igracIzlaziId: this.selectedPlayerIdOut,\n        })\n      );\n\n      this.selectedPlayerIdOut = null;\n      this.selectedPlayerIdIn = null;\n    }\n \n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}