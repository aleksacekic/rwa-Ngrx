{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { select } from '@ngrx/store';\nimport { filter, of } from 'rxjs';\nimport * as fromApp from 'src/app/store/igrac.selector';\nimport * as TimActions from 'src/app/store/igrac.action';\nimport { selectIgraciZamena } from 'src/app/store/igrac.selector';\nimport { Emitters } from 'src/app/emitters/emitters';\nexport let FudbalskitimComponent = class FudbalskitimComponent {\n  constructor(store, fudbalskitimService, authService, jwtService) {\n    this.store = store;\n    this.fudbalskitimService = fudbalskitimService;\n    this.authService = authService;\n    this.jwtService = jwtService;\n    this.trenutniTim$ = of();\n    this.igraciTeren$ = of([]);\n    this.igraciTerenIds$ = of([]);\n    this.igraciZamenaIds$ = of([]);\n    this.igraciZamena$ = of([]);\n    this.golmani$ = of([]);\n    this.odbrambeni$ = of([]);\n    this.veznjaci$ = of([]);\n    this.napadaci$ = of([]);\n    this.selectedPlayerIdOut = null;\n    this.selectedPlayerIdIn = null;\n    this.authenticated = true;\n    this.igraciZamena$ = this.store.select(selectIgraciZamena);\n    this.trenutniKorisnikID = null;\n    ;\n  }\n  ngOnInit() {\n    Emitters.authEmitter.emit(true);\n    if (this.authService.isLoggedIn()) {\n      // Uzmite ID trenutno prijavljenog korisnika\n      const token = this.jwtService.getToken();\n      console.log(token);\n      if (token) {\n        const decodedToken = atob(token.split('.')[1]);\n        console.log(decodedToken);\n        const parsedToken = JSON.parse(decodedToken);\n        console.log(parsedToken);\n        const userId = parsedToken.id; // Promeniti na odgovarajuće ime polja u tokenima\n        console.log(userId);\n        // Postavite trenutni korisnik ID\n        this.trenutniKorisnikID = userId;\n        this.store.dispatch(TimActions.loadIgraciZamena({\n          timID: this.trenutniTimID\n        }));\n        this.store.pipe(select(fromApp.selectGolmani), filter(golmani => golmani.length > 0)).subscribe(golmani => {\n          this.golmani$ = of(golmani);\n        });\n        this.store.pipe(select(fromApp.selectOdbrambeni), filter(odbrambeni => odbrambeni.length > 0)).subscribe(odbrambeni => {\n          this.odbrambeni$ = of(odbrambeni);\n        });\n        this.store.pipe(select(fromApp.selectVeznjaci), filter(vezni => vezni.length > 0)).subscribe(vezni => {\n          this.veznjaci$ = of(vezni);\n        });\n        this.store.pipe(select(fromApp.selectNapadaci), filter(napadaci => napadaci.length > 0)).subscribe(napadaci => {\n          this.napadaci$ = of(napadaci);\n        });\n        this.store.pipe(select(fromApp.selectIgraciTeren), filter(igraciTeren => igraciTeren.length > 0)).subscribe(igraciTeren => {\n          this.igraciTeren$ = of(igraciTeren);\n        });\n        this.store.pipe(select(fromApp.selectIgraciZamena), filter(igraciZamena => igraciZamena.length > 0)).subscribe(igraciZamena => {\n          this.igraciZamena$ = of(igraciZamena);\n        });\n      }\n    }\n    // this.trenutniTim$ = this.store.select(fromApp.selectTrenutniTim);\n    // this.igraciTerenIds$ = this.store.select(fromApp.selectIgraciTerenIds);\n    // this.igraciZamenaIds$ = this.store.select(fromApp.selectIgraciZamenaIds);\n    // this.igraciZamena$ = this.store.select(fromApp.selectIgraciZamena);\n    // this.igraciTeren$ = this.store.select(fromApp.selectIgraciTeren);\n    // this.golmani$ = this.store.select(fromApp.selectGolmani);\n    // this.odbrambeni$ = this.store.select(fromApp.selectOdbrambeni);\n    // this.veznjaci$ = this.store.select(fromApp.selectVeznjaci);\n    // this.napadaci$ = this.store.select(fromApp.selectNapadaci);\n    // this.store.dispatch(TimActions.loadTimById({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadIgraciTeren({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadGolmani({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadOdbrambeni({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadVeznjaci({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadNapadaci({ timID: this.trenutniTimID }));\n    // console.log(this.igraciZamena$);\n    //  this.store.pipe(select(state => state)).subscribe(currentState => {\n    //   console.log('Trenutno stanje:', currentState.igraci, currentState.timovi);\n    // });\n  }\n\n  clickedUlazi(playerId) {\n    this.selectedPlayerIdIn = playerId;\n  }\n  clickedIzlazi(playerId) {\n    this.selectedPlayerIdOut = playerId;\n  }\n  swapPlayers() {\n    if (this.selectedPlayerIdOut !== null && this.selectedPlayerIdIn !== null) {\n      this.store.dispatch(TimActions.swapPlayers({\n        timID: this.trenutniTimID,\n        igracUlaziId: this.selectedPlayerIdIn,\n        igracIzlaziId: this.selectedPlayerIdOut\n      }));\n      this.selectedPlayerIdOut = null;\n      this.selectedPlayerIdIn = null;\n    }\n  }\n};\nFudbalskitimComponent = __decorate([Component({\n  selector: 'app-fudbalskitim',\n  templateUrl: './fudbalskitim.component.html',\n  styleUrls: ['./fudbalskitim.component.css']\n})], FudbalskitimComponent);","map":{"version":3,"names":["Component","select","filter","of","fromApp","TimActions","selectIgraciZamena","Emitters","FudbalskitimComponent","constructor","store","fudbalskitimService","authService","jwtService","trenutniTim$","igraciTeren$","igraciTerenIds$","igraciZamenaIds$","igraciZamena$","golmani$","odbrambeni$","veznjaci$","napadaci$","selectedPlayerIdOut","selectedPlayerIdIn","authenticated","trenutniKorisnikID","ngOnInit","authEmitter","emit","isLoggedIn","token","getToken","console","log","decodedToken","atob","split","parsedToken","JSON","parse","userId","id","dispatch","loadIgraciZamena","timID","trenutniTimID","pipe","selectGolmani","golmani","length","subscribe","selectOdbrambeni","odbrambeni","selectVeznjaci","vezni","selectNapadaci","napadaci","selectIgraciTeren","igraciTeren","igraciZamena","clickedUlazi","playerId","clickedIzlazi","swapPlayers","igracUlaziId","igracIzlaziId","__decorate","selector","templateUrl","styleUrls"],"sources":["D:\\OneDrive\\OneDrive - Faculty of Electronic Engineering\\Radna površina\\RWA - Drugi i treci projekat\\AngularProjekat\\src\\app\\components\\fudbalskitim\\fudbalskitim.component.ts"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { Store, select } from '@ngrx/store';\nimport { Observable, filter, of } from 'rxjs';\nimport { AppState } from 'src/app/app.state';\nimport { Igrac } from 'src/app/models/igrac';\nimport { Tim } from 'src/app/models/tim';\nimport * as fromApp from 'src/app/store/igrac.selector';\nimport * as TimActions from 'src/app/store/igrac.action';\nimport { FudbalskitimService } from 'src/app/services/fudbalskitim.service';\nimport { selectIgraciZamena } from 'src/app/store/igrac.selector';\nimport { loadGolmani, loadIgraciZamena, loadNapadaci, loadOdbrambeni, loadVeznjaci } from 'src/app/store/igrac.action';\nimport { Emitters } from 'src/app/emitters/emitters';\nimport { AuthService } from 'src/app/services/auth.service';\n\n\n@Component({\n  selector: 'app-fudbalskitim',\n  templateUrl: './fudbalskitim.component.html',\n  styleUrls: ['./fudbalskitim.component.css']\n})\nexport class FudbalskitimComponent implements OnInit {\n  trenutniTimID: number | undefined;\n  trenutniKorisnikID: number | null;\n  trenutniTim$: Observable<Tim | undefined> = of();\n  igraciTeren$: Observable<Igrac[]> = of([]);\n  igraciTerenIds$: Observable<number[]> = of([]);\n  igraciZamenaIds$: Observable<Igrac[]> = of([]);\n  igraciZamena$: Observable<Igrac[]> = of([]);\n  golmani$: Observable<Igrac[]>= of([]);\n  odbrambeni$: Observable<Igrac[]>= of([]);\n  veznjaci$: Observable<Igrac[]>= of([]);\n  napadaci$: Observable<Igrac[]> = of([]);\n\n  selectedPlayerIdOut: number | null = null;\n  selectedPlayerIdIn: number | null = null;\n  authenticated = true;\n  constructor(private store: Store<AppState>, private fudbalskitimService: FudbalskitimService,private authService: AuthService,\n    private jwtService: JwtService,) {\n    this.igraciZamena$ = this.store.select(selectIgraciZamena)\n    this.trenutniKorisnikID = null;;\n \n  }\n\n  ngOnInit(): void {\n    Emitters.authEmitter.emit(true);\n    if (this.authService.isLoggedIn()) {\n      // Uzmite ID trenutno prijavljenog korisnika\n      const token = this.jwtService.getToken();\n      console.log(token)\n      if (token) {\n        const decodedToken = atob(token.split('.')[1]);\n        console.log(decodedToken)\n        const parsedToken = JSON.parse(decodedToken);\n        console.log(parsedToken)\n        const userId = parsedToken.id; // Promeniti na odgovarajuće ime polja u tokenima\n        console.log(userId);\n\n        // Postavite trenutni korisnik ID\n        this.trenutniKorisnikID = userId;\n        this.store.dispatch(TimActions.loadIgraciZamena({ timID: this.trenutniTimID }));\n        this.store.pipe(\n          select(fromApp.selectGolmani),\n          filter(golmani => golmani.length > 0),\n        ).subscribe(golmani => {\n          this.golmani$ = of(golmani);\n        });\n    \n        this.store.pipe(\n          select(fromApp.selectOdbrambeni),\n          filter(odbrambeni => odbrambeni.length > 0),\n        ).subscribe(odbrambeni => {\n          this.odbrambeni$ = of(odbrambeni);\n        });\n    \n        this.store.pipe(\n          select(fromApp.selectVeznjaci),\n          filter(vezni => vezni.length > 0),\n        ).subscribe(vezni => {\n          this.veznjaci$ = of(vezni);\n        });\n    \n        this.store.pipe(\n          select(fromApp.selectNapadaci),\n          filter(napadaci => napadaci.length > 0),\n        ).subscribe(napadaci => {\n          this.napadaci$ = of(napadaci);\n        });\n        \n        this.store.pipe(\n          select(fromApp.selectIgraciTeren),\n          filter(igraciTeren => igraciTeren.length > 0),\n        ).subscribe(igraciTeren => {\n          this.igraciTeren$ = of(igraciTeren);\n        });\n         \n        this.store.pipe(\n          select(fromApp.selectIgraciZamena),\n          filter(igraciZamena => igraciZamena.length > 0),\n        ).subscribe(igraciZamena => {\n          this.igraciZamena$ = of(igraciZamena);\n        });\n         \n\n      }}\n    // this.trenutniTim$ = this.store.select(fromApp.selectTrenutniTim);\n    // this.igraciTerenIds$ = this.store.select(fromApp.selectIgraciTerenIds);\n    // this.igraciZamenaIds$ = this.store.select(fromApp.selectIgraciZamenaIds);\n    // this.igraciZamena$ = this.store.select(fromApp.selectIgraciZamena);\n    // this.igraciTeren$ = this.store.select(fromApp.selectIgraciTeren);\n    // this.golmani$ = this.store.select(fromApp.selectGolmani);\n    // this.odbrambeni$ = this.store.select(fromApp.selectOdbrambeni);\n    // this.veznjaci$ = this.store.select(fromApp.selectVeznjaci);\n    // this.napadaci$ = this.store.select(fromApp.selectNapadaci);\n    \n\n    // this.store.dispatch(TimActions.loadTimById({ timID: this.trenutniTimID }));\n    \n    // this.store.dispatch(TimActions.loadIgraciTeren({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadGolmani({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadOdbrambeni({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadVeznjaci({ timID: this.trenutniTimID }));\n    // this.store.dispatch(TimActions.loadNapadaci({ timID: this.trenutniTimID }));\n\n\n   \n   \n    // console.log(this.igraciZamena$);\n    //  this.store.pipe(select(state => state)).subscribe(currentState => {\n    //   console.log('Trenutno stanje:', currentState.igraci, currentState.timovi);\n    // });\n\n  }\n\n  clickedUlazi(playerId: number) {\n    this.selectedPlayerIdIn = playerId;\n  }\n\n  clickedIzlazi(playerId: number) {\n    this.selectedPlayerIdOut = playerId;\n  }\n\n\n\n  swapPlayers() {\n    if (this.selectedPlayerIdOut !== null && this.selectedPlayerIdIn !== null) {\n      this.store.dispatch(\n        TimActions.swapPlayers({\n          timID: this.trenutniTimID,\n          igracUlaziId: this.selectedPlayerIdIn,\n          igracIzlaziId: this.selectedPlayerIdOut,\n        })\n      );\n\n      this.selectedPlayerIdOut = null;\n      this.selectedPlayerIdIn = null;\n    }\n \n  }\n\n  \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}