{"ast":null,"code":"import { createReducer, on } from \"@ngrx/store\";\nimport { loadIgraciSuccess, loadTimoviSuccess, swapPlayers, updateIgracSuccess, updateTimSuccess } from \"./igrac.action\";\nimport { selectIgraciTerenIds } from \"./igrac.selector\";\nexport const selectTimState = state => state.timovi;\nconst initialStateTim = {\n  timovi: [],\n  trenutniTimID: 0,\n  igraciTerenIds: [],\n  igraciZamenaIds: []\n};\nexport const timReducer = createReducer(initialStateTim, on(loadTimoviSuccess,\n// znaci treba da def kako ce se stanje promeniti posle akcije loadTimoviSucces\n(state, {\n  timovi\n}) => ({\n  ...state,\n  timovi: timovi,\n  igraciTeren: selectIgraciTerenIds,\n  igraci\n})),\n//moze i samo timovi\non(updateTimSuccess, state => ({\n  ...state\n})), on(swapPlayers, (state, {\n  igracIzlaziId,\n  igracUlaziId\n}) => {\n  const updatedTimovi = state.timovi.map(tim => {\n    const igracIzlaziIndex = tim.igraciTeren.indexOf(igracIzlaziId);\n    const igracUlaziIndex = tim.igraciZamena.indexOf(igracUlaziId);\n    // Ako su pronađeni, vršimo zamenu u nizovima\n    if (igracIzlaziIndex !== -1 && igracUlaziIndex !== -1) {\n      tim.igraciTeren[igracIzlaziIndex] = igracUlaziId;\n      tim.igraciZamena[igracUlaziIndex] = igracIzlaziId;\n    }\n    return tim;\n  });\n  return {\n    ...state,\n    timovi: updatedTimovi\n  };\n}));\nconst initialStateIgraci = {\n  igraci: []\n};\nexport const igracReducer = createReducer(initialStateIgraci, on(loadIgraciSuccess, (state, {\n  igraci\n}) => ({\n  ...state,\n  igraci: igraci\n})), on(updateIgracSuccess, state => ({\n  ...state\n})));","map":{"version":3,"names":["createReducer","on","loadIgraciSuccess","loadTimoviSuccess","swapPlayers","updateIgracSuccess","updateTimSuccess","selectIgraciTerenIds","selectTimState","state","timovi","initialStateTim","trenutniTimID","igraciTerenIds","igraciZamenaIds","timReducer","igraciTeren","igraci","igracIzlaziId","igracUlaziId","updatedTimovi","map","tim","igracIzlaziIndex","indexOf","igracUlaziIndex","igraciZamena","initialStateIgraci","igracReducer"],"sources":["D:\\OneDrive\\OneDrive - Faculty of Electronic Engineering\\Radna površina\\AngularProjekat\\src\\app\\store\\igrac.reducer.ts"],"sourcesContent":["import { createReducer, on } from \"@ngrx/store\";\r\nimport { Igrac } from \"../models/igrac\";\r\nimport { Tim } from \"../models/tim\";\r\nimport { loadIgraciSuccess, loadTimoviSuccess, swapPlayers, updateIgracSuccess, updateTimSuccess } from \"./igrac.action\";\r\nimport { selectIgraciTerenIds } from \"./igrac.selector\";\r\n\r\nexport const selectTimState = (state: TimState) => state.timovi;\r\n\r\nexport interface IgracState {\r\n  igraci: Igrac[];\r\n}\r\n\r\nexport interface TimState {\r\n  timovi: Tim[];\r\n  trenutniTimID: number;\r\n  igraciTerenIds: number[];\r\n  igraciZamenaIds: number[];\r\n\r\n}\r\n\r\ninterface SelektovaniIgraciState {\r\n  igracNaTerenId: number | null;\r\n  igracNaKlupiId: number | null;\r\n}\r\n\r\nconst initialStateTim: TimState = {\r\n  timovi: [],\r\n  trenutniTimID:0,\r\n  igraciTerenIds: [],\r\n  igraciZamenaIds:[]\r\n};\r\n\r\nexport const timReducer = createReducer(\r\n  initialStateTim,\r\n  on(loadTimoviSuccess, // znaci treba da def kako ce se stanje promeniti posle akcije loadTimoviSucces\r\n     (state, { timovi }) =>\r\n      ({ ...state, //destruktuiramo\r\n         timovi: timovi,\r\n        igraciTeren: selectIgraciTerenIds,\r\n      igraci })), //moze i samo timovi\r\n  on(updateTimSuccess, state => ({ ...state })),\r\n  on(swapPlayers, (state, { igracIzlaziId, igracUlaziId }) => {\r\n    const updatedTimovi = state.timovi.map(tim => {\r\n      const igracIzlaziIndex = tim.igraciTeren.indexOf(igracIzlaziId);\r\n      const igracUlaziIndex = tim.igraciZamena.indexOf(igracUlaziId);\r\n\r\n      // Ako su pronađeni, vršimo zamenu u nizovima\r\n      if (igracIzlaziIndex !== -1 && igracUlaziIndex !== -1) {\r\n        tim.igraciTeren[igracIzlaziIndex] = igracUlaziId;\r\n        tim.igraciZamena[igracUlaziIndex] = igracIzlaziId;\r\n      }\r\n\r\n      return tim;\r\n    });\r\n\r\n    return { ...state, timovi: updatedTimovi };\r\n  })\r\n);\r\n\r\nconst initialStateIgraci: IgracState = {\r\n  igraci: []\r\n};\r\n\r\nexport const igracReducer = createReducer(\r\n  initialStateIgraci,\r\n  on(loadIgraciSuccess,\r\n     (state, { igraci }) =>\r\n      ({ ...state,\r\n         igraci: igraci })),\r\n  on(updateIgracSuccess, state => ({ ...state }))\r\n);\r\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,EAAE,QAAQ,aAAa;AAG/C,SAASC,iBAAiB,EAAEC,iBAAiB,EAAEC,WAAW,EAAEC,kBAAkB,EAAEC,gBAAgB,QAAQ,gBAAgB;AACxH,SAASC,oBAAoB,QAAQ,kBAAkB;AAEvD,OAAO,MAAMC,cAAc,GAAIC,KAAe,IAAKA,KAAK,CAACC,MAAM;AAmB/D,MAAMC,eAAe,GAAa;EAChCD,MAAM,EAAE,EAAE;EACVE,aAAa,EAAC,CAAC;EACfC,cAAc,EAAE,EAAE;EAClBC,eAAe,EAAC;CACjB;AAED,OAAO,MAAMC,UAAU,GAAGf,aAAa,CACrCW,eAAe,EACfV,EAAE,CAACE,iBAAiB;AAAE;AACnB,CAACM,KAAK,EAAE;EAAEC;AAAM,CAAE,MAChB;EAAE,GAAGD,KAAK;EACRC,MAAM,EAAEA,MAAM;EACfM,WAAW,EAAET,oBAAoB;EACnCU;AAAM,CAAE,CAAC,CAAC;AAAE;AAChBhB,EAAE,CAACK,gBAAgB,EAAEG,KAAK,KAAK;EAAE,GAAGA;AAAK,CAAE,CAAC,CAAC,EAC7CR,EAAE,CAACG,WAAW,EAAE,CAACK,KAAK,EAAE;EAAES,aAAa;EAAEC;AAAY,CAAE,KAAI;EACzD,MAAMC,aAAa,GAAGX,KAAK,CAACC,MAAM,CAACW,GAAG,CAACC,GAAG,IAAG;IAC3C,MAAMC,gBAAgB,GAAGD,GAAG,CAACN,WAAW,CAACQ,OAAO,CAACN,aAAa,CAAC;IAC/D,MAAMO,eAAe,GAAGH,GAAG,CAACI,YAAY,CAACF,OAAO,CAACL,YAAY,CAAC;IAE9D;IACA,IAAII,gBAAgB,KAAK,CAAC,CAAC,IAAIE,eAAe,KAAK,CAAC,CAAC,EAAE;MACrDH,GAAG,CAACN,WAAW,CAACO,gBAAgB,CAAC,GAAGJ,YAAY;MAChDG,GAAG,CAACI,YAAY,CAACD,eAAe,CAAC,GAAGP,aAAa;;IAGnD,OAAOI,GAAG;EACZ,CAAC,CAAC;EAEF,OAAO;IAAE,GAAGb,KAAK;IAAEC,MAAM,EAAEU;EAAa,CAAE;AAC5C,CAAC,CAAC,CACH;AAED,MAAMO,kBAAkB,GAAe;EACrCV,MAAM,EAAE;CACT;AAED,OAAO,MAAMW,YAAY,GAAG5B,aAAa,CACvC2B,kBAAkB,EAClB1B,EAAE,CAACC,iBAAiB,EACjB,CAACO,KAAK,EAAE;EAAEQ;AAAM,CAAE,MAChB;EAAE,GAAGR,KAAK;EACRQ,MAAM,EAAEA;AAAM,CAAE,CAAC,CAAC,EACzBhB,EAAE,CAACI,kBAAkB,EAAEI,KAAK,KAAK;EAAE,GAAGA;AAAK,CAAE,CAAC,CAAC,CAChD"},"metadata":{},"sourceType":"module","externalDependencies":[]}