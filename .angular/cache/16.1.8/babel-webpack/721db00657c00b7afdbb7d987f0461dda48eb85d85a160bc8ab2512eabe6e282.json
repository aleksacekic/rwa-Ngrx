{"ast":null,"code":"import { createReducer, on } from \"@ngrx/store\";\nimport { loadGolmaniSuccess, loadIgraciSuccess, loadIgraciTerenSuccess, loadIgraciZamenaSuccess, loadNapadaciSuccess, loadOdbrambeniSuccess, loadTimByIdSuccess, loadTimoviSuccess, loadVeznjaciSuccess, swapPlayers, updateTimSuccess } from \"./igrac.action\";\nexport const selectTimState = state => state.timovi;\nconst initialStateTim = {\n  timovi: [],\n  trenutniTimID: 0,\n  igraciTeren: [],\n  igraciZamena: []\n};\nexport const timReducer = createReducer(initialStateTim, on(swapPlayers, (state, {\n  igracIzlaziId,\n  igracUlaziId\n}) => {\n  const noviIgraciTeren = state.igraciTeren.map(igrac => {\n    if (igrac.id === igracIzlaziId) {\n      // Igrač izlazi, postaviti na undefined\n      return undefined;\n    } else if (igrac.id === igracUlaziId) {\n      // Igrač ulazi, pronaći njegove detalje i postaviti na njega\n      return state.igraci.find(igrac => igrac.id === igracUlaziId);\n    } else {\n      return igrac;\n    }\n  });\n  const noviIgraciZamena = state.igraciZamena.map(igrac => {\n    if (igrac.id === igracUlaziId) {\n      // Igrač ulazi, postaviti na undefined\n      return undefined;\n    } else if (igrac.id === igracIzlaziId) {\n      // Igrač izlazi, pronaći njegove detalje i postaviti na njega\n      return state.igraci.find(igrac => igrac.id === igracIzlaziId);\n    } else {\n      return igrac;\n    }\n  });\n  return {\n    ...state,\n    igraciTeren: noviIgraciTeren,\n    igraciZamena: noviIgraciZamena\n  };\n}), on(loadTimoviSuccess,\n// znaci treba da def kako ce se stanje promeniti posle akcije loadTimoviSucces\n(state, {\n  timovi\n}) => ({\n  ...state,\n  timovi: timovi\n})),\n//moze i samo timovi\non(updateTimSuccess, state => ({\n  ...state\n})),\n// on(swapPlayers, (state, { igracIzlaziId, igracUlaziId }) => {\n//   const updatedTimovi = state.timovi.map(tim => {\n//     const igracIzlaziIndex = tim.igraciTeren.indexOf(igracIzlaziId);\n//     const igracUlaziIndex = tim.igraciZamena.indexOf(igracUlaziId);\n//     // Ako su pronađeni, vršimo zamenu u nizovima\n//     if (igracIzlaziIndex !== -1 && igracUlaziIndex !== -1) {\n//       tim.igraciTeren[igracIzlaziIndex] = igracUlaziId;\n//       tim.igraciZamena[igracUlaziIndex] = igracIzlaziId;\n//     }\n//     return tim;\n//   });\n//   console.log(\"OVO JE IZ TIM REDUCERA\")\n//   console.log(state,updatedTimovi);\n//   return { ...state, timovi: updatedTimovi };\n// }),\non(loadTimByIdSuccess, (state, {\n  tim,\n  igraciTeren,\n  igraciZamena\n}) => {\n  return {\n    ...state,\n    timovi: state.timovi.map(postojeciTim => postojeciTim.id === tim.id ? {\n      ...tim\n    } : postojeciTim),\n    igraciTerenIds: igraciTeren,\n    igraciZamenaIds: igraciZamena\n  };\n}), on(loadIgraciZamenaSuccess, (state, {\n  igraciZamena\n}) => {\n  return {\n    ...state,\n    igraciZamena: igraciZamena // Ažuriramo niz igrača zamena\n  };\n}), on(loadIgraciTerenSuccess, (state, {\n  igraciTeren\n}) => {\n  return {\n    ...state,\n    igraciTeren: igraciTeren // Ažuriramo niz igrača zamena\n  };\n}), on(loadGolmaniSuccess, (state, {\n  golmani\n}) => {\n  return {\n    ...state,\n    golmani: golmani\n  };\n}), on(loadOdbrambeniSuccess, (state, {\n  odbrambeni\n}) => {\n  return {\n    ...state,\n    odbrambeni: odbrambeni\n  };\n}), on(loadVeznjaciSuccess, (state, {\n  veznjaci\n}) => {\n  return {\n    ...state,\n    veznjaci: veznjaci\n  };\n}), on(loadNapadaciSuccess, (state, {\n  napadaci\n}) => {\n  return {\n    ...state,\n    napadaci: napadaci\n  };\n}));\nconst initialStateIgraci = {\n  igraci: [],\n  pozicija: \"\"\n};\nexport const igracReducer = createReducer(initialStateIgraci, on(loadIgraciSuccess, (state, {\n  igraci\n}) => ({\n  ...state,\n  igraci: igraci\n})));","map":{"version":3,"names":["createReducer","on","loadGolmaniSuccess","loadIgraciSuccess","loadIgraciTerenSuccess","loadIgraciZamenaSuccess","loadNapadaciSuccess","loadOdbrambeniSuccess","loadTimByIdSuccess","loadTimoviSuccess","loadVeznjaciSuccess","swapPlayers","updateTimSuccess","selectTimState","state","timovi","initialStateTim","trenutniTimID","igraciTeren","igraciZamena","timReducer","igracIzlaziId","igracUlaziId","noviIgraciTeren","map","igrac","id","undefined","igraci","find","noviIgraciZamena","tim","postojeciTim","igraciTerenIds","igraciZamenaIds","golmani","odbrambeni","veznjaci","napadaci","initialStateIgraci","pozicija","igracReducer"],"sources":["D:\\OneDrive\\OneDrive - Faculty of Electronic Engineering\\Radna površina\\AngularProjekat\\src\\app\\store\\igrac.reducer.ts"],"sourcesContent":["import { createReducer, on } from \"@ngrx/store\";\r\nimport { Igrac } from \"../models/igrac\";\r\nimport { Tim } from \"../models/tim\";\r\nimport { loadGolmaniSuccess, loadIgraciSuccess, loadIgraciTerenSuccess, loadIgraciZamenaSuccess, loadNapadaciSuccess, loadOdbrambeniSuccess, loadTimByIdSuccess, loadTimoviSuccess, loadVeznjaciSuccess, swapPlayers, swapPlayersSuccess, updateIgracSuccess, updateTimSuccess } from \"./igrac.action\";\r\n\r\nexport const selectTimState = (state: TimState) => state.timovi;\r\n\r\nexport interface IgracState {\r\n  igraci: Igrac[],\r\n  pozicija:string,\r\n}\r\n\r\nexport interface TimState {\r\n  timovi: Tim[];\r\n  trenutniTimID: number;\r\n  igraciTeren: Igrac[];\r\n  igraciZamena: Igrac[];\r\n}\r\n\r\ninterface SelektovaniIgraciState {\r\n  igracNaTerenId: number | null;\r\n  igracNaKlupiId: number | null;\r\n}\r\n\r\n\r\nconst initialStateTim: TimState = {\r\n  timovi: [],\r\n  trenutniTimID:0,\r\n  igraciTeren: [],\r\n  igraciZamena:[],\r\n};\r\n\r\nexport const timReducer = createReducer(\r\n  initialStateTim,\r\n  on(swapPlayers, (state, { igracIzlaziId, igracUlaziId }) => {\r\n    const noviIgraciTeren = state.igraciTeren.map(igrac => {\r\n      if (igrac.id === igracIzlaziId) {\r\n        // Igrač izlazi, postaviti na undefined\r\n        return undefined;\r\n      } else if (igrac.id === igracUlaziId) {\r\n        // Igrač ulazi, pronaći njegove detalje i postaviti na njega\r\n        return state.igraci.find(igrac => igrac.id === igracUlaziId);\r\n      } else {\r\n        return igrac;\r\n      }\r\n    });\r\n  \r\n    const noviIgraciZamena = state.igraciZamena.map(igrac => {\r\n      if (igrac.id === igracUlaziId) {\r\n        // Igrač ulazi, postaviti na undefined\r\n        return undefined;\r\n      } else if (igrac.id === igracIzlaziId) {\r\n        // Igrač izlazi, pronaći njegove detalje i postaviti na njega\r\n        return state.igraci.find(igrac => igrac.id === igracIzlaziId);\r\n      } else {\r\n        return igrac;\r\n      }\r\n    });\r\n  \r\n    return {\r\n      ...state,\r\n      igraciTeren: noviIgraciTeren,\r\n      igraciZamena: noviIgraciZamena\r\n    };\r\n  })\r\n\r\n  \r\n  on(loadTimoviSuccess, // znaci treba da def kako ce se stanje promeniti posle akcije loadTimoviSucces\r\n     (state, { timovi }) =>\r\n      ({ ...state, //destruktuiramo\r\n         timovi: timovi })), //moze i samo timovi\r\n  on(updateTimSuccess, state => ({ ...state })),\r\n  // on(swapPlayers, (state, { igracIzlaziId, igracUlaziId }) => {\r\n  //   const updatedTimovi = state.timovi.map(tim => {\r\n  //     const igracIzlaziIndex = tim.igraciTeren.indexOf(igracIzlaziId);\r\n  //     const igracUlaziIndex = tim.igraciZamena.indexOf(igracUlaziId);\r\n\r\n  //     // Ako su pronađeni, vršimo zamenu u nizovima\r\n  //     if (igracIzlaziIndex !== -1 && igracUlaziIndex !== -1) {\r\n  //       tim.igraciTeren[igracIzlaziIndex] = igracUlaziId;\r\n  //       tim.igraciZamena[igracUlaziIndex] = igracIzlaziId;\r\n  //     }\r\n\r\n  //     return tim;\r\n  //   });\r\n  //   console.log(\"OVO JE IZ TIM REDUCERA\")\r\n  //   console.log(state,updatedTimovi);\r\n  //   return { ...state, timovi: updatedTimovi };\r\n  // }),\r\n  on(loadTimByIdSuccess, (state, { tim,\r\n     igraciTeren, igraciZamena }) => {\r\n    return {\r\n      ...state,\r\n      timovi: state.timovi.map(postojeciTim =>\r\n        postojeciTim.id === tim.id ? { ...tim } : postojeciTim\r\n      ),\r\n      igraciTerenIds: igraciTeren,\r\n      igraciZamenaIds: igraciZamena\r\n    };\r\n  }),\r\n  on(loadIgraciZamenaSuccess, (state, { igraciZamena }) => {\r\n    return {\r\n      ...state,\r\n      igraciZamena: igraciZamena // Ažuriramo niz igrača zamena\r\n    };\r\n  }),\r\n  on(loadIgraciTerenSuccess, (state, { igraciTeren }) => {\r\n    return {\r\n      ...state,\r\n      igraciTeren: igraciTeren // Ažuriramo niz igrača zamena\r\n    };\r\n  }),\r\n  on(loadGolmaniSuccess, (state, { golmani }) => {\r\n    return {\r\n      ...state,\r\n      golmani: golmani\r\n    };\r\n  }),\r\n  on(loadOdbrambeniSuccess, (state, { odbrambeni }) => {\r\n    return {\r\n      ...state,\r\n      odbrambeni: odbrambeni\r\n    };\r\n  }),\r\n  on(loadVeznjaciSuccess, (state, { veznjaci }) => {\r\n    return {\r\n      ...state,\r\n      veznjaci: veznjaci\r\n    };\r\n  }),\r\n  on(loadNapadaciSuccess, (state, { napadaci }) => {\r\n    return {\r\n      ...state,\r\n      napadaci: napadaci\r\n    };\r\n  })\r\n);\r\n\r\nconst initialStateIgraci: IgracState = {\r\n  igraci: [],\r\n  pozicija:\"\"\r\n};\r\n\r\nexport const igracReducer = createReducer(\r\n  initialStateIgraci,\r\n  on(loadIgraciSuccess,\r\n     (state, { igraci }) =>\r\n      ({ ...state,\r\n         igraci: igraci })),\r\n  // on(updateIgracSuccess, state => ({ ...state })),\r\n  \r\n  \r\n);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}