{"ast":null,"code":"var _class;\nimport { of } from 'rxjs';\nimport { loadTimById, loadIgraciTeren, loadGolmani, loadOdbrambeni, loadVeznjaci, loadNapadaci, loadTrenutniKorisnik } from './store/igrac.action';\nimport { selectIgraciZamena } from './store/igrac.selector';\nimport { Emitters } from './emitters/emitters';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"./services/korisnik.service\";\nimport * as i3 from \"./services/auth.service\";\nimport * as i4 from \"./services/jwt.service\";\nimport * as i5 from \"ngx-cookie-service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"./components/nav/nav.component\";\nexport class AppComponent {\n  constructor(\n  // private FudbalskitimService: FudbalskitimService,\n  store, korisnikService, authService, jwtService, cookieService, router) {\n    this.store = store;\n    this.korisnikService = korisnikService;\n    this.authService = authService;\n    this.jwtService = jwtService;\n    this.cookieService = cookieService;\n    this.router = router;\n    this.igraciZamena$ = of([]);\n    this.title = 'AngularProjekat';\n    this.igraciZamena$ = this.store.select(selectIgraciZamena);\n    this.trenutniKorisnikID = null; // Postavljamo na null dok ne dobijemo prave podatke\n  }\n\n  ngOnInit() {\n    Emitters.authEmitter.emit(true);\n    // Proveri da li je korisnik prijavljen\n    if (this.authService.isLoggedIn()) {\n      // Uzmite ID trenutno prijavljenog korisnika\n      const token = this.jwtService.getToken();\n      console.log(token);\n      if (token) {\n        const decodedToken = atob(token.split('.')[1]);\n        const parsedToken = JSON.parse(decodedToken);\n        const userId = parsedToken.id; // Promeniti na odgovarajuće ime polja u tokenima\n        // Postavite trenutni korisnik ID\n        this.trenutniKorisnikID = userId;\n        // Dobijemo trenutnog korisnika i njegov tim ID\n        this.trenutniKorisnik$ = this.korisnikService.getKorisnikById(userId);\n        this.trenutniKorisnik$.subscribe(korisnik => {\n          if (korisnik) {\n            this.trenutniTimID = korisnik.timId;\n            if (this.trenutniTimID) {\n              this.store.dispatch(loadTimById({\n                timID: this.trenutniTimID\n              }));\n              // this.store.dispatch(loadIgraciZamena({ timID: this.trenutniTimID }));\n              this.store.dispatch(loadIgraciTeren({\n                timID: this.trenutniTimID\n              }));\n              this.store.dispatch(loadGolmani({\n                timID: this.trenutniTimID\n              }));\n              this.store.dispatch(loadOdbrambeni({\n                timID: this.trenutniTimID\n              }));\n              this.store.dispatch(loadVeznjaci({\n                timID: this.trenutniTimID\n              }));\n              this.store.dispatch(loadNapadaci({\n                timID: this.trenutniTimID\n              }));\n            }\n          } else {\n            console.error('Nije moguće pronaći trenutnog korisnika.');\n          }\n        });\n        // Učitaj trenutnog korisnika\n        this.store.dispatch(loadTrenutniKorisnik({\n          korisnikId: userId\n        }));\n      }\n    } else {\n      console.log('Korisnik nije prijavljen.');\n    }\n  }\n}\n_class = AppComponent;\n_class.ɵfac = function AppComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.KorisnikService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.JwtService), i0.ɵɵdirectiveInject(i5.CookieService), i0.ɵɵdirectiveInject(i6.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-root\"]],\n  decls: 2,\n  vars: 0,\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-nav\")(1, \"router-outlet\");\n    }\n  },\n  dependencies: [i6.RouterOutlet, i7.NavComponent],\n  styles: [\".\\nkartice[_ngcontent-%COMP%]{\\n  display:flex;\\n  justify-content: center;\\n  margin-top:30px;\\n}\\n.kartica[_ngcontent-%COMP%]{\\n  margin-right: 40px;\\n  padding: 30px;\\n  font-size: larger;\\n  background-color: rgb(61, 61, 61);\\n  color:white;\\n}\\n\\n.kartica[_ngcontent-%COMP%]:hover{\\n  cursor:pointer;\\n}\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0VBRUUsWUFBWTtFQUNaLHVCQUF1QjtFQUN2QixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLGlCQUFpQjtFQUNqQixpQ0FBaUM7RUFDakMsV0FBVztBQUNiOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQ0ciLCJzb3VyY2VzQ29udGVudCI6WyIuXHJcbmthcnRpY2V7XHJcbiAgZGlzcGxheTpmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6MzBweDtcclxufVxyXG4ua2FydGljYXtcclxuICBtYXJnaW4tcmlnaHQ6IDQwcHg7XHJcbiAgcGFkZGluZzogMzBweDtcclxuICBmb250LXNpemU6IGxhcmdlcjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNjEsIDYxLCA2MSk7XHJcbiAgY29sb3I6d2hpdGU7XHJcbn1cclxuXHJcbi5rYXJ0aWNhOmhvdmVye1xyXG4gIGN1cnNvcjpwb2ludGVyO1xyXG59XHJcblxyXG4vKiBcclxuIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy50cmVudXRuaUtvcmlzbmlrSUQgPSB0aGlzLmF1dGhTZXJ2aWNlLmdldFVzZXJJZCgpO1xyXG4gICAgY29uc29sZS5sb2coXCJTQUNFXCIpXHJcbiAgICBjb25zb2xlLmxvZyhcIlwiKVxyXG4gICAgaWYgKHRoaXMuYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpKSB7XHJcbiAgICAgIGlmKHRoaXMudHJlbnV0bmlLb3Jpc25pa0lEKVxyXG4gICAgICB7XHJcbiAgICAgICAgIHRoaXMudHJlbnV0bmlLb3Jpc25payQgPSB0aGlzLmtvcmlzbmlrU2VydmljZS5nZXRLb3Jpc25pa0J5SWQodGhpcy50cmVudXRuaUtvcmlzbmlrSUQpO1xyXG4gICAgICAgICB0aGlzLnRyZW51dG5pS29yaXNuaWskLnN1YnNjcmliZSgoa29yaXNuaWspID0+IHtcclxuICAgICAgICAgIGlmIChrb3Jpc25paykge1xyXG4gICAgICAgICAgICB0aGlzLnRyZW51dG5pVGltSUQgPSBrb3Jpc25pay50aW1JZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICBpZiAodGhpcy50cmVudXRuaVRpbUlEICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2gobG9hZFRpbUJ5SWQoeyB0aW1JRDogdGhpcy50cmVudXRuaVRpbUlEIH0pKTtcclxuICAgICAgICAvLyB0aGlzLnN0b3JlLmRpc3BhdGNoKGxvYWRJZ3JhY2laYW1lbmEoeyB0aW1JRDogdGhpcy50cmVudXRuaVRpbUlEIH0pKTtcclxuICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGxvYWRJZ3JhY2lUZXJlbih7IHRpbUlEOiB0aGlzLnRyZW51dG5pVGltSUQgfSkpO1xyXG4gICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2gobG9hZEdvbG1hbmkoeyB0aW1JRDogdGhpcy50cmVudXRuaVRpbUlEIH0pKTtcclxuICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGxvYWRPZGJyYW1iZW5pKHsgdGltSUQ6IHRoaXMudHJlbnV0bmlUaW1JRCB9KSk7XHJcbiAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChsb2FkVmV6bmphY2koeyB0aW1JRDogdGhpcy50cmVudXRuaVRpbUlEIH0pKTtcclxuICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGxvYWROYXBhZGFjaSh7IHRpbUlEOiB0aGlzLnRyZW51dG5pVGltSUQgfSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5lcnJvcignVHJlbnV0bmkgdGltIElEIG5pamUgZGVmaW5pc2FuLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMudHJlbnV0bmlLb3Jpc25pa0lEKVxyXG4gICAge1xyXG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGxvYWRUcmVudXRuaUtvcmlzbmlrKHtrb3Jpc25pa0lkOiB0aGlzLnRyZW51dG5pS29yaXNuaWtJRH0pKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG59ICovIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["of","loadTimById","loadIgraciTeren","loadGolmani","loadOdbrambeni","loadVeznjaci","loadNapadaci","loadTrenutniKorisnik","selectIgraciZamena","Emitters","AppComponent","constructor","store","korisnikService","authService","jwtService","cookieService","router","igraciZamena$","title","select","trenutniKorisnikID","ngOnInit","authEmitter","emit","isLoggedIn","token","getToken","console","log","decodedToken","atob","split","parsedToken","JSON","parse","userId","id","trenutniKorisnik$","getKorisnikById","subscribe","korisnik","trenutniTimID","timId","dispatch","timID","error","korisnikId","i0","ɵɵdirectiveInject","i1","Store","i2","KorisnikService","i3","AuthService","i4","JwtService","i5","CookieService","i6","Router","selectors","decls","vars","template","AppComponent_Template","rf","ctx","ɵɵelement"],"sources":["D:\\OneDrive\\OneDrive - Faculty of Electronic Engineering\\Radna površina\\RWA - Drugi i treci projekat\\AngularProjekat\\src\\app\\app.component.ts","D:\\OneDrive\\OneDrive - Faculty of Electronic Engineering\\Radna površina\\RWA - Drugi i treci projekat\\AngularProjekat\\src\\app\\app.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Store } from '@ngrx/store';\nimport { Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie-service';\n\n\nimport {\n  loadTimById,\n  loadIgraciTeren,\n  loadGolmani,\n  loadOdbrambeni,\n  loadVeznjaci,\n  loadNapadaci,\n  loadTrenutniKorisnik,\n} from './store/igrac.action';\nimport { KorisnikService } from './services/korisnik.service';\nimport { AuthService } from './services/auth.service';\nimport { JwtService } from './services/jwt.service';\nimport { Igrac } from './models/igrac';\nimport { AppState } from './app.state';\nimport { selectIgraciZamena } from './store/igrac.selector';\nimport { Emitters } from './emitters/emitters';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  trenutniTimID: number | undefined;\n  trenutniKorisnik$: Observable<any> | undefined;\n  trenutniKorisnikID: number | null;\n\n  igraciZamena$: Observable<Igrac[]> = of([]);\n\n  constructor(\n    // private FudbalskitimService: FudbalskitimService,\n    private store: Store<AppState>,\n    private korisnikService: KorisnikService,\n    private authService: AuthService,\n    private jwtService: JwtService,\n    private cookieService: CookieService,\n    private router: Router\n  ) {\n    this.igraciZamena$ = this.store.select(selectIgraciZamena);\n    this.trenutniKorisnikID = null; // Postavljamo na null dok ne dobijemo prave podatke\n  }\n\n  ngOnInit(): void {\n    Emitters.authEmitter.emit(true);\n    // Proveri da li je korisnik prijavljen\n    if (this.authService.isLoggedIn()) {\n      // Uzmite ID trenutno prijavljenog korisnika\n      const token = this.jwtService.getToken();\n      console.log(token)\n      if (token) {\n        const decodedToken = atob(token.split('.')[1]);\n        const parsedToken = JSON.parse(decodedToken);\n        const userId = parsedToken.id; // Promeniti na odgovarajuće ime polja u tokenima\n\n        // Postavite trenutni korisnik ID\n        this.trenutniKorisnikID = userId;\n\n        // Dobijemo trenutnog korisnika i njegov tim ID\n        this.trenutniKorisnik$ = this.korisnikService.getKorisnikById(userId);\n\n        this.trenutniKorisnik$.subscribe((korisnik) => {\n          if (korisnik) {\n            this.trenutniTimID = korisnik.timId;\n            if(this.trenutniTimID){\n            this.store.dispatch(loadTimById({ timID: this.trenutniTimID }));\n            // this.store.dispatch(loadIgraciZamena({ timID: this.trenutniTimID }));\n            this.store.dispatch(loadIgraciTeren({ timID: this.trenutniTimID }));\n            this.store.dispatch(loadGolmani({ timID: this.trenutniTimID }));\n            this.store.dispatch(loadOdbrambeni({ timID: this.trenutniTimID }));\n            this.store.dispatch(loadVeznjaci({ timID: this.trenutniTimID }));\n            this.store.dispatch(loadNapadaci({ timID: this.trenutniTimID }));\n            }\n            \n          } else {\n            console.error('Nije moguće pronaći trenutnog korisnika.');\n          }\n        });\n\n        // Učitaj trenutnog korisnika\n        this.store.dispatch(loadTrenutniKorisnik({ korisnikId: userId }));\n      }\n    } else {\n      console.log('Korisnik nije prijavljen.');\n    }\n  }\n\n  title = 'AngularProjekat';\n}\n","<!-- <nav>\r\n  <ul class=\"kartice\">\r\n    <ul class=\"kartica\" routerLink=\"/fudbalskitim\">\r\n      <div>FUDBALSKI TIM</div>\r\n    </ul>\r\n    <ul class=\"kartica\" routerLink=\"/transferi\">\r\n      <div>TRANSFERI</div>\r\n    </ul>\r\n    <ul class=\"kartica\" routerLink=\"/utakmica\">\r\n      <div>UTAKMICA</div>\r\n    </ul>\r\n  </ul>\r\n</nav> -->\r\n<app-nav></app-nav>\r\n<router-outlet></router-outlet>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}